---
source: tests/stream_response_test.rs
expression: "&session.transactions.last().unwrap()"
---
id: "[id]"
request:
  model: gpt-4
  messages:
    - role: user
      content: Hello World
  functions:
    - name: list_dir
      description: List directory contents
      parameters:
        properties:
          path:
            description: path to directory
            type: string
        required:
          - path
        type: object
    - name: read_lines
      description: "read lines from a file, with optional start and end lines"
      parameters:
        properties:
          end_line:
            description: line to end read
            type: number
          path:
            description: path to file
            type: string
          start_line:
            description: line to start read
            type: number
        required:
          - path
        type: object
    - name: replace_lines
      description: replace lines in a text file
      parameters:
        properties:
          end_line:
            description: line to end replace
            type: number
          path:
            description: path to file
            type: string
          replace_text:
            description: text to replace removed lines
            type: string
          start_line:
            description: line to start replace
            type: number
        required:
          - path
          - start_line
          - end_line
          - replace_text
        type: object
  stream: true
  max_tokens: 1024
responses:
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: assistant
            content: ""
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: Hi
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " there"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: "!"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " How"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " can"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " I"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " assist"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " you"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: " today"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: "?"
            function_call: ~
          finish_reason: ~
  - StreamResponse:
      id: chatcmpl-8Chs6GuyVQKmiKn2tAAixiESbOtV8
      object: chat.completion.chunk
      created: 1698039270
      model: gpt-4-0613
      choices:
        - index: 0
          delta:
            role: ~
            content: ~
            function_call: ~
          finish_reason: stop
rendered: []
completed: false
styled: false

